Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],n=arguments[1],a=0;o>a;a++)if(a in t){var c=t[a];e.call(n,c,a,t)&&i.push(c)}return i});var WebcomAdmin={};WebcomAdmin.__init__=function(e){e('input[type="file"]').parents("form").attr("enctype","multipart/form-data"),e('input[type="file"]').parents("form").attr("encoding","multipart/form-data")},WebcomAdmin.utilityPageSections=function(e){var t=this;t.active=null,t.parent=e(".i-am-a-fancy-admin"),t.sections=e(".i-am-a-fancy-admin .fields .section"),t.buttons=e(".i-am-a-fancy-admin .sections .section a"),t.buttonWrap=e(".i-am-a-fancy-admin .sections"),t.sectionLinks=e('.i-am-a-fancy-admin .fields .section a[href^="#"]'),this.showSection=function(){var o=e(this),i=o.attr("href"),n=e(i);if(t.buttonWrap.find('.section a[href="'+i+'"]')&&n.is(t.sections)){t.buttons.removeClass("active"),o.addClass("active"),t.active.hide(),t.active=n,t.active.show(),history.pushState({},"",o.attr("href"));var a=t.parent.find('input[name="_wp_http_referer"]');return a.val(window.location),!1}},this.__init__=function(){t.active=t.sections.first(),t.sections.not(t.active).hide(),t.buttons.first().addClass("active"),t.buttons.click(this.showSection),t.sectionLinks.click(this.showSection),window.location.hash&&t.buttons.filter('[href="'+window.location.hash+'"]').click();var o=setInterval(function(){e(".updated").fadeOut(1e3),clearInterval(o)},2e3)},t.parent.length>0&&t.__init__()},WebcomAdmin.fileUploader=function(e){e(".meta-file-wrap").each(function(){var t,o=e(this),i=o.find(".meta-file-field"),n=o.find(".meta-file-upload"),a=o.find(".meta-file-delete"),c=o.find(".meta-file-preview");n.on("click",function(e){return e.preventDefault(),t?void t.open():(t=wp.media({title:"Select or Upload a File",button:{text:"Use this file"},multiple:!1}),t.on("select",function(){var e=t.state().get("selection").first().toJSON();c.html('<img src="'+e.iconOrThumb+'"><br>'+e.filename),i.val(e.id),n.addClass("hidden"),a.removeClass("hidden")}),void t.open())}),a.on("click",function(e){e.preventDefault(),c.html("No file selected."),n.removeClass("hidden"),a.addClass("hidden"),i.val("")})})},WebcomAdmin.iconModal=function(e){e(".meta-icon-toggle").on("click",function(t){var o=e(this).parent().parent().find(".meta-icon-field").attr("id"),i=e("#meta-icon-field-id"),n=e("#"+o).val();if(o&&i&&(i.val(o),n)){var a=e('i[data-icon-value="'+n+'"]').parent();a.addClass("selected"),setTimeout(function(){e("#TB_ajaxContent").animate({scrollTop:a.position().top-48},100)},750)}}),e(".meta-fa-icon").on("click",function(t){e(".meta-fa-icon").removeClass("selected"),e(this).addClass("selected")}),e("#meta-icon-search").on("keyup",function(){var t=e(this).val();""===t?e(".meta-fa-icon").show():(e(".meta-fa-icon").hide(),e('i[class*="'+t+'"]').parent().show())}),e("#meta-icon-submit").on("click",function(){var t=e(".meta-fa-icon.selected").find("i").attr("data-icon-value"),o=e("#meta-icon-field-id"),i=e("#"+o.val().replace("[","\\[").replace("]","\\]")),n=i.parent().find("i");t&&(i.val(t),n.length?n.attr("class","fa "+t+" fa-preview"):($icon=e('<i class="fa '+t+' fa-preview"></i>'),i.parent().prepend($icon))),tb_remove()})},WebcomAdmin.menuField=function(e){var t=e(".meta-menu-field");if(t.length){var o=WebcomLocal.menuApi,i=function(){e.getJSON(o+"/menus",function(e){for(var o in e){var i=e[o];0===t.find("option[value="+i.ID+"]").length&&t.append('<option value="'+i.ID+'">'+i.name+"</option>")}})},n=function(t){var o=e(this),i=o.find("option:selected").val(),n=o.parent().find("a.edit-menu");i?n.attr("href",WebcomLocal.menuAdmin+"?action=edit&menu="+i):n.hide()};WebcomLocal.menuApi&&setInterval(i,5e3),t.on("change",n)}},WebcomAdmin.shortcodeInterfaceTool=function(e){var t=WebcomAdmin.shortcodeInterfaceTool;t.shortcodeForm=e("#select-shortcode-form"),t.shortcodeButton=t.shortcodeForm.find("button"),t.shortcodeSelect=t.shortcodeForm.find("#shortcode-select"),t.shortcodeEditors=t.shortcodeForm.find("#shortcode-editors"),t.shortcodeDescriptions=t.shortcodeForm.find("#shortcode-descriptions"),t.shortcodeInsert=function(e,t,o){var i="["+e;if(t)for(var n in t)i+=" "+n+'="'+t[n]+'"';i+="]",o&&(i+=o),i+="[/"+e+"]",send_to_editor(i)},t.shortcodeAction=function(){var o=t.shortcodeSelect.find(":selected");if(!(o.length<1||""===o.val())){var i=t.shortcodeEditors.find("li.shortcode-"+t.shortcodeSelected),n=o.attr("data-enclosing")||null,a=tinymce.activeEditor?tinymce.activeEditor.selection.getContent():null,c=null;c=n&&a?a:n;var r={};1===i.length&&i.children().each(function(){var t=e(this);switch(console.log(t.prop("tagName")),t.prop("tagName")){case"INPUT":case"TEXTAREA":case"SELECT":"checkbox"===t.prop("type")?r[t.attr("data-parameter")]=String(t.prop("checked")):r[t.attr("data-parameter")]=t.val()}}),t.shortcodeInsert(o.val(),r,c)}},t.shortcodeSelectAction=function(){t.shortcodeSelected=t.shortcodeSelect.val(),t.shortcodeEditors.find("li").hide(),t.shortcodeDescriptions.find("li").hide(),t.shortcodeEditors.find(".shortcode-"+t.shortcodeSelected).show(),t.shortcodeDescriptions.find(".shortcode-"+t.shortcodeSelected).show()},t.shortcodeSelectAction(),t.shortcodeSelect.change(t.shortcodeSelectAction),t.shortcodeButton.click(t.shortcodeAction)},function(e){WebcomAdmin.__init__(e),WebcomAdmin.utilityPageSections(e),WebcomAdmin.fileUploader(e),WebcomAdmin.iconModal(e),WebcomAdmin.menuField(e),WebcomAdmin.shortcodeInterfaceTool(e)}(jQuery);